<!DOCTYPE html><html lang="en">
  <head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no"><title>Tutorial: Get Started Writing PEML - PEML</title>

<meta name="description" content="The Programming Exercise Markup Language (PEML) is designed to provide an ultra-human-friendly authoring format for describing automatically graded programmi...">
<link rel="canonical" href="https://cssplice.github.io/peml/tutorial.html"><link rel="alternate" type="application/rss+xml" title="PEML" href="/peml/feed.xml"><!-- start favicons snippet, use https://realfavicongenerator.net/ --><link rel="apple-touch-icon" sizes="180x180" href="/peml/assets/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/peml/assets/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/peml/assets/favicon-16x16.png"><link rel="manifest" href="/peml/assets/site.webmanifest"><link rel="mask-icon" href="/peml/assets/safari-pinned-tab.svg" color="#fc4d50"><link rel="shortcut icon" href="/peml/assets/favicon.ico">

<meta name="msapplication-TileColor" content="#ffc40d"><meta name="msapplication-config" content="/peml/assets/browserconfig.xml">

<meta name="theme-color" content="#ffffff">
<!-- end favicons snippet --><link rel="stylesheet" href="/peml/assets/css/main.css"><link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.0.13/css/all.css" ><!-- start custom head snippets -->

<!-- end custom head snippets -->
<script>(function() {
  window.isArray = function(val) {
    return Object.prototype.toString.call(val) === '[object Array]';
  };
  window.isString = function(val) {
    return typeof val === 'string';
  };

  window.hasEvent = function(event) {
    return 'on'.concat(event) in window.document;
  };

  window.isOverallScroller = function(node) {
    return node === document.documentElement || node === document.body || node === window;
  };

  window.isFormElement = function(node) {
    var tagName = node.tagName;
    return tagName === 'INPUT' || tagName === 'SELECT' || tagName === 'TEXTAREA';
  };

  window.pageLoad = (function () {
    var loaded = false, cbs = [];
    window.addEventListener('load', function () {
      var i;
      loaded = true;
      if (cbs.length > 0) {
        for (i = 0; i < cbs.length; i++) {
          cbs[i]();
        }
      }
    });
    return {
      then: function(cb) {
        cb && (loaded ? cb() : (cbs.push(cb)));
      }
    };
  })();
})();
(function() {
  window.throttle = function(func, wait) {
    var args, result, thisArg, timeoutId, lastCalled = 0;

    function trailingCall() {
      lastCalled = new Date;
      timeoutId = null;
      result = func.apply(thisArg, args);
    }
    return function() {
      var now = new Date,
        remaining = wait - (now - lastCalled);

      args = arguments;
      thisArg = this;

      if (remaining <= 0) {
        clearTimeout(timeoutId);
        timeoutId = null;
        lastCalled = now;
        result = func.apply(thisArg, args);
      } else if (!timeoutId) {
        timeoutId = setTimeout(trailingCall, remaining);
      }
      return result;
    };
  };
})();
(function() {
  var Set = (function() {
    var add = function(item) {
      var i, data = this._data;
      for (i = 0; i < data.length; i++) {
        if (data[i] === item) {
          return;
        }
      }
      this.size ++;
      data.push(item);
      return data;
    };

    var Set = function(data) {
      this.size = 0;
      this._data = [];
      var i;
      if (data.length > 0) {
        for (i = 0; i < data.length; i++) {
          add.call(this, data[i]);
        }
      }
    };
    Set.prototype.add = add;
    Set.prototype.get = function(index) { return this._data[index]; };
    Set.prototype.has = function(item) {
      var i, data = this._data;
      for (i = 0; i < data.length; i++) {
        if (this.get(i) === item) {
          return true;
        }
      }
      return false;
    };
    Set.prototype.is = function(map) {
      if (map._data.length !== this._data.length) { return false; }
      var i, j, flag, tData = this._data, mData = map._data;
      for (i = 0; i < tData.length; i++) {
        for (flag = false, j = 0; j < mData.length; j++) {
          if (tData[i] === mData[j]) {
            flag = true;
            break;
          }
        }
        if (!flag) { return false; }
      }
      return true;
    };
    Set.prototype.values = function() {
      return this._data;
    };
    return Set;
  })();

  window.Lazyload = (function(doc) {
    var queue = {js: [], css: []}, sources = {js: {}, css: {}}, context = this;
    var createNode = function(name, attrs) {
      var node = doc.createElement(name), attr;
      for (attr in attrs) {
        if (attrs.hasOwnProperty(attr)) {
          node.setAttribute(attr, attrs[attr]);
        }
      }
      return node;
    };
    var end = function(type, url) {
      var s, q, qi, cbs, i, j, cur, val, flag;
      if (type === 'js' || type ==='css') {
        s = sources[type], q = queue[type];
        s[url] = true;
        for (i = 0; i < q.length; i++) {
          cur = q[i];
          if (cur.urls.has(url)) {
            qi = cur, val = qi.urls.values();
            qi && (cbs = qi.callbacks);
            for (flag = true, j = 0; j < val.length; j++) {
              cur = val[j];
              if (!s[cur]) {
                flag = false;
              }
            }
            if (flag && cbs && cbs.length > 0) {
              for (j = 0; j < cbs.length; j++) {
                cbs[j].call(context);
              }
              qi.load = true;
            }
          }
        }
      }
    };
    var load = function(type, urls, callback) {
      var s, q, qi, node, i, cur,
        _urls = typeof urls === 'string' ? new Set([urls]) : new Set(urls), val, url;
      if (type === 'js' || type ==='css') {
        s = sources[type], q = queue[type];
        for (i = 0; i < q.length; i++) {
          cur = q[i];
          if (_urls.is(cur.urls)) {
            qi = cur;
            break;
          }
        }
        val = _urls.values();
        if (qi) {
          callback && (qi.load || qi.callbacks.push(callback));
          callback && (qi.load && callback());
        } else {
          q.push({
            urls: _urls,
            callbacks: callback ? [callback] : [],
            load: false
          });
          for (i = 0; i < val.length; i++) {
            node = null, url = val[i];
            if (s[url] === undefined) {
              (type === 'js' ) && (node = createNode('script', { src: url }));
              (type === 'css') && (node = createNode('link', { rel: 'stylesheet', href: url }));
              if (node) {
                node.onload = (function(type, url) {
                  return function() {
                    end(type, url);
                  };
                })(type, url);
                (doc.head || doc.body).appendChild(node);
                s[url] = false;
              }
            }
          }
        }
      }
    };
    return {
      js: function(url, callback) {
        load('js', url, callback);
      },
      css: function(url, callback) {
        load('css', url, callback);
      }
    };
  })(this.document);
})();
</script><script>
  (function() {
    var TEXT_VARIABLES = {
      version: '2.2.6',
      sources: {
        font_awesome: 'https://use.fontawesome.com/releases/v5.0.13/css/all.css',
        jquery: 'https://cdn.bootcss.com/jquery/3.1.1/jquery.min.js',
        leancloud_js_sdk: '//cdn1.lncld.net/static/js/3.4.1/av-min.js',
        chart: 'https://cdn.bootcss.com/Chart.js/2.7.2/Chart.bundle.min.js',
        gitalk: {
          js: 'https://cdn.bootcss.com/gitalk/1.2.2/gitalk.min.js',
          css: 'https://cdn.bootcss.com/gitalk/1.2.2/gitalk.min.css'
        },
        valine: 'https://unpkg.com/valine/dist/Valine.min.js',
        mathjax: 'https://cdn.bootcss.com/mathjax/2.7.4/MathJax.js?config=TeX-MML-AM_CHTML',
        mermaid: 'https://cdn.bootcss.com/mermaid/8.0.0-rc.8/mermaid.min.js'
      },
      site: {
        toc: {
          selectors: 'h2,h3,h4'
        }
      },
      paths: {
        search_js: '/peml/assets/search.js'
      }
    };
    window.TEXT_VARIABLES = TEXT_VARIABLES;
  })();
</script>
</head>
  <body>
    <div class="root" data-is-touch="false">
      <div class="layout--page js-page-root"><div class="page__main js-page-main page__viewport has-aside cell cell--auto">

      <div class="page__main-inner"><div class="page__header d-print-none"><header class="header"><div class="main">
      <div class="header__title">
        <div class="header__brand"><svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
	 width="24px" height="24px" viewBox="0 0 24 24">
<style type="text/css">
	.st0{fill:#515151;}
</style>
<path class="st0" d="M1.7,22.3c5.7-5.7,11.3-5.7,17,0c3.3-3.3,3.5-5.3,0.8-6c2.7,0.7,3.5-1.1,2.3-5.6s-3.3-5.2-6.3-2.1
	c3-3,2.3-5.2-2.1-6.3S7,1.8,7.7,4.6C7,1.8,5,2.1,1.7,5.3C7.3,11,7.3,16.7,1.7,22.3"/>
</svg>
<a title="The Programming Exercise Markup Language (PEML) is designed to provide an ultra-human-friendly authoring format for describing automatically graded programming assignments.
" href="/peml/">PEML</a></div><button class="button button--secondary button--circle search-button js-search-toggle"><i class="fas fa-search"></i></button></div><nav class="navigation">
        <ul><li class="navigation__item"><a href="/peml/">Introduction</a></li><li class="navigation__item navigation__item--active"><a href="/peml/tutorial.html">Tutorial</a></li><li class="navigation__item"><a href="/peml/schemas/">Specification</a></li><li class="navigation__item"><a href="/peml/examples/">Examples</a></li><li class="navigation__item"><a href="/peml/PEMLtest/">PEMLtest</a></li><li class="navigation__item"><a href="https://github.com/CSSPLICE/peml/">Software</a></li><li class="navigation__item"><a href="https://github.com/CSSPLICE/CSSPLICE.github.io/tree/master/peml/">GitHub</a></li><li class="navigation__item"><a href="https://cssplice.github.io/">SPLICE</a></li><li><button class="button button--secondary button--circle search-button js-search-toggle"><i class="fas fa-search"></i></button></li></ul>
      </nav></div>
  </header>
</div><div class="page__content"><div class="article__header--overlay"><div class="hero hero--center hero--dark overlay" style="background-image:;background-color:#007bff;"><div class="hero__content"><div class="article__header"><header><h1>Tutorial: Get Started Writing PEML</h1></header><span class="split-space">&nbsp;</span>
          <a class="edit-on-github"
            title="Edit on Github"
            href="https://github.com/cssplice/cssplice.github.io/tree/master/peml/jekyll_src/tutorial.html">
            <i class="far fa-edit"></i></a></div><p class="overlay__excerpt">The Programming Exercise Markup Language (PEML) is designed to provide an ultra-human-friendly authoring format for describing automatically graded programming assignments.</p></div>
              </div>
            </div><div class="grid grid--reverse">

              <div class="col-aside d-print-none js-col-aside"><aside class="page__aside js-page-aside"><div class="toc-aside js-toc-root"></div>
</aside></div>

              <div class="col-main cell cell--auto"><!-- start custom main top snippet -->

<!-- end custom main top snippet -->
<article itemscope itemtype="http://schema.org/Article"><meta itemprop="headline" content="Tutorial: Get Started Writing PEML"><meta itemprop="author" content="Virginia Tech"/><div class="js-article-content"><div class="layout--article"><!-- start custom article top snippet -->

<!-- end custom article top snippet -->
<div class="article__content" itemprop="articleBody"><section>
  <h2 id="syntax">Core Syntax</h2>
  <p>You probably already know a little about <a href="index.html">what
  PEML is</a> and why it was created.
  Some of the very rudimentary basics of PEML's syntax are shown here:</p>

<figure class="highlight"><pre><code class="language-peml" data-lang="peml"><span class="c1"># Single-line comments start with #</span><span class="w">
</span><span class="c1"># Comments must be on lines by themselves</span><span class="w">

</span><span class="k">key:</span><span class="w"> </span>value<span class="w">

</span><span class="c1"># keys start on the beginning of a line, and are followed by a colon.</span><span class="w">
</span><span class="c1"># values follow the key (can start on the next line), and continue to</span><span class="w">
</span><span class="c1"># the next key.</span><span class="w">

</span><span class="k">nested.keys.define.structure:</span><span class="w"> </span>Nested<span class="w"> </span>keys<span class="w"> </span>use<span class="w"> </span>dotted<span class="w"> </span>notation<span class="w">

</span><span class="k">quoted.value:</span><span class="sh">----------
Quoted values act like "HereDocs". You can define your own
delimiter (any printing character repeated 3+ times).
----------</span></code></pre></figure>
</section>
<section>
  <h2 id="first-file">Your First PEML File</h2>

  <p>OK, enough with the syntax. Now start with this minimal version of an
  exercise and fill in your own content (you
  can <a href="examples/01-minimal.peml">download a slightly longer version
  here</a>):
  </p>

<figure class="highlight"><pre><code class="language-peml" data-lang="peml"><span class="k">exercise_id:</span><span class="w"> </span><span class="kc">&lt;insert-your-globally-unique-id-here&gt;</span><span class="w">

</span><span class="k">title:</span><span class="w"> </span><span class="kc">&lt;what title will you use?&gt;</span><span class="w">

</span><span class="k">license.id:</span><span class="w"> </span>cc-sa-4.0<span class="w">
</span><span class="k">license.owner.email:</span><span class="w"> </span><span class="kc">&lt;your email&gt;</span><span class="w">
</span><span class="k">license.owner.name:</span><span class="w"> </span><span class="kc">&lt;your name&gt;</span><span class="w">

</span><span class="k">instructions:</span><span class="sh">----------
Write instructions for your exercise here.
----------</span></code></pre></figure>

  <p>You can edit your own PEML files locally using any text editor, or
  you can edit PEML right in your web browser by opening our live
  editing/validation site in a separate tab:</p>

  <p><a href="https://skynet.cs.vt.edu/peml-live" target="_blank">PEML Live!</a></p>

  <p>
    The fields in this minimal document are:
  </p>

  <dl>
  <dt>exercise_id</dl>
  <dd>
  <p>
  Provide a unique identifier for your exercise. <em>Globally</em> unique.
  Any sequence of non-whitespace characters is ok, but you may wish to
  stick to existing naming conventions used in other domains. For example,
  you could use a unique URL (perhaps where this exercise's home definition
  lives), or something like a Java package name (a dotted name, perhaps
  including a university's domain name as a prefix), or your email combined
  with a unique exercise suffix of your own devising.
  </p>
  </dd>
  <dt>title</dl>
  <dd>
  <p>
  Provide a descriptive title that will be used as a human-readable label for
  the exercise. The intent is for this to be the "title" shown to students in
  various contexts, either when viewing a single exercise or when viewing
  lists of exercises. While there is no specific length limit, ideally titles
  should be no more than "one line" in size, because of the various contexts
  where they might be displayed.
  </p>
  </dd>
  <dt>license.id</dt>
  <dd>
  <p>
  While a license isn't strictly required, it is strongly recommended.
  The id can be specified by a URL that identifies the license, or by a
  name (or abbreviated name) that is in common use, such as any of the
  <a href="https://help.github.com/en/articles/licensing-a-repository">license
  keywords used by github</a> (an excellent source for potential
  license choices). You can even use "(C) 2021 <your name>, All rights reserved".
  While you could just specify an author email using
  <code>author:</code>, listing a license is better (everyone must
  assume "all rights reserved" if you do not). See
  <a href="schemas/exercise.html#author">author</a> or
  <a href="schemas/exercise.html#license">license</a> for more details).
  </p>
  </dd>
  <dt>license.owner</dt>
  <dd>
  <p>
  Probably you. For an individual, either specify a unique, identifying
  email address, or as shown here, an email address along with a name
  using separate keys. For an organization, you can specify your information
  as <code>author:</code>, and then provide <code>license.owner:</code> to
  specify the organization owning the copyright.
  </p>
  </dd>
  <dt>instructions</dt>
  <dd>
  <p>
  Provide your exercise's instructions here. This isn't required in all contexts
  (for example, if providing an auto-grading setup), but you probably want to.
  </p>
  </dd>
  </dl>

  <p>Now you have a PEML description!</p>
</section>


<section>
  <h2 id="language">Identifying the Programming Language</h2>

  <p>If your exercise is a programming exercise, you probably will find it
  useful to identify the programming language it supports. PEML does this
  by allowing you to define the "programming system".
  </p>

<figure class="highlight"><pre><code class="language-peml" data-lang="peml"><span class="kn">[systems]</span><span class="w">
</span><span class="k">language:</span><span class="w"> </span>Java<span class="w">
</span><span class="k">version:</span><span class="w"> </span>&gt;=<span class="w"> </span>1.9<span class="w">
</span><span class="kn">[]</span></code></pre></figure>

  <p>
  The <code>language:</code> key is the required one--specify the language that
  is supported using its common name (be careful of capitalization, since
  some tools processing descriptions might not treat the name case-insensitively),
  or its MIME type (to reduce ambiguity). Optionally, you can also specify
  a version, if your supporting files are version-dependent. Feel free to
  use <a href="https://guides.rubygems.org/patterns/#declaring-dependencies">gem-style
  version dependency constraints</a>, although check with your educational
  tool to determine what is supported. 
  </p>
  <p>
  Note that the <code>language:</code> and <code>version:</code> keys here are
  listed inside a <code>[systems]</code> array. There's only one element in
  the array in this example, but PEML does allow authors to express exercises
  that support multiple programming systems. You can ignore that for now.
  However, this is a good chance to recap PEML's array notation.
  </p>
  <p>
  In short, arrays (lists) in PEML have keys that are surrounded by square
  brackets instead of using a colon. The end of the list is marked with a
  pair of empty square brackets (which can be omitted if they are at the end
  of the file). All the keys between these two markers are part of the list.
  Like ArchieML, if you look at the keys inside, as soon as a key is duplicated,
  that is taken as the start of a new entry in the list. So an array with
  multiple entries might look like this:
  </p>
<figure class="highlight"><pre><code class="language-peml" data-lang="peml"><span class="kn">[systems]</span><span class="w">
</span><span class="k">language:</span><span class="w"> </span>Java<span class="w">
</span><span class="k">version:</span><span class="w"> </span>&gt;=<span class="w"> </span>1.9<span class="w">

</span><span class="k">language:</span><span class="w"> </span>Python<span class="w">
</span><span class="k">version:</span><span class="w"> </span>&gt;=<span class="w"> </span>3<span class="w">
</span><span class="kn">[]</span></code></pre></figure>
</section>


<section>
  <h2 id="format">Associating Supporting Files</h2>
  <p>
    OK, so where's all the cool stuff? Like auto-grader inputs and all that?
  </p>
  <p>
    PEML provides a very rich model for structuring this information for
    tool use. However, PEML relies heavily on
    <a href="https://en.wikipedia.org/wiki/Convention_over_configuration">convention
    over configuration</a>
    to simplify the way those things are managed and to make it easier for
    authors to learn the minimal amount they need, and gradually add onto
    that core over time as more advanced situations arise.
  </p>
  
  <h3>Starting Files Provided to the Student</h3>
  <p>
    Suppose you want to provide some file(s) to the student as the starting
    point for their solution. Just add them in the <code>src/starter</code>
    folder next to the PEML description itself. We recommend placing each
    exercise that uses additional resources in its own directory. This
    approach works whether the PEML description is located in a folder
    on the local machine, is packaged in a zip file or another form of
    archive, or hosted in a repository. You could also use the
    <code>[src.starter.files]</code> array key to provide this information
    in the PEML description itself, implicitly providing them by co-location
    is often simpler.
  </p>
<pre class="dir">
# Providing starter files for the user
dir
|-- exercise.peml
+-- src
    +-- starter
        |-- file1.ext
        |-- file2.ext
        +-- file3.ext
</pre>

  <h3>Images Used in the Instructions</h3>
  <p>
    Suppose you want to provide images for use in your instructions.
    Instructions are typically written in Markdown or vanilla HTML, but
    can certainly refer to supplemental files, whether they be images,
    separate pages describing APIs, examples students can download, etc.
    While you could host these resources on your own website and use absolute
    URLs, you may wish for them to be packaged with the exercise. You can
    use the <code>[public_html]</code> key to specify these explicitly, or
    simply place them in a <code>public_html</code> folder.
  </p>
<pre class="dir">
# Providing images files for the instructions
dir
|-- exercise.peml
+-- public_html
|   |-- image1.png
|   |-- image2.png
|   +-- download_file.dat
+-- src
    +-- starter
        |-- file1.ext
        |-- file2.ext
        +-- file3.ext
</pre>

  <h3>Test Case Files for Auto-grading</h3>
  <p>
    Suppose you want to provide some file(s) specifying the tests you want
    to use to check the behavior of answers to the exercise. These could be
    in the form of compilable program code, scripts, data files, or whatever
    notation/format is used by the auto-grading tool reading your PEML
    description. You can provide these as separate files under the
    <code>suites</code> folder, which corresponds to the <code>[suites]</code>
    array key.
  </p>
<pre class="dir">
# Providing test case files
dir
|-- exercise.peml
+-- public_html
|   |-- image1.png
|   |-- image2.png
|   +-- download_file.dat
+-- src
|   +-- starter
|       |-- file1.ext
|       |-- file2.ext
|       +-- file3.ext
+-- suites
    |-- TestClass1.java
    +-- TestClass2.java
</pre>

  <h3>Other Supplemental Files for Auto-grading</h3>
  <p>
    Suppose your auto-grading tests use additional data files or other
    resources that need to be available during execution of your tests.
    Not all grading tools support such resources, but if they do, you
    can provide them in the <code>environment/test</code> folder,
    which corresponds to the <code>[environment.test.files]</code> key.
  </p>
  <p>
  <span class="badge badge-warning">Note:</span>
  If you'd rather use a docker image to provide the environmental setup
  for environments (for building, running, testing, or even the student's
  starting environmet) and your tool supports this kind of usage, you
  probably want to just specify image information directly in the PEML
  file--see <a href="schemas/definitions.html#environments">Environments</a>
  in the data model).
  </p>
<pre class="dir">
# Providing data resources for use in testing
dir
|-- exercise.peml
+-- public_html
|   |-- image1.png
|   |-- image2.png
|   +-- download_file.dat
+-- src
|   +-- starter
|       |-- file1.ext
|       |-- file2.ext
|       +-- file3.ext
+-- suites
|   |-- TestClass1.java
|   +-- TestClass2.java
+-- environment
    +-- test
        |-- file4.ext
        |-- file5.ext
        +-- file6.ext
</pre>

  <h3>System-specific Files</h3>
  <p>
    Top-level keys like <code>src.*</code>, <code>environment.*</code>, or
    <code>[suites]</code> affect the whole exercise, which means they
    apply to all programming systems that the exercise supports. When
    the exercise only targets one programming language, that's probably
    fine. If, however, you write your exercise so that it supports
    multiple programming systems, you may wish to provide different
    resources for each system. You can do that by using the same
    directory structure for <code>src/</code>, <code>environment/</code>,
    and <code>suites/</code>, but placing them underneath
    <code>systems/&lt;language&gt;</code> (using the language name as
    specified in the PEML file--if a MIME type is used, replace the '/'
    in the MIME type with a '-').
  </p>
  <p>
  <span class="badge badge-warning">Note:</span>
  Most tools do not support exercises that support multiple programming
  systems. However, they should still support the <em>first</em> system
  listed, including system-specific settings provided in the way described
  here.
  </p>
<pre class="dir">
# Providing system-specific resources
dir
|-- exercise.peml
+-- systems
    +-- Java
    |   +-- src
    |   |   +-- starter
    |   |       |-- Class1.java
    |   |       +-- Class2.java
    |   +-- suites
    |   |   |-- TestClass1.java
    |   |   +-- TestClass2.java
    |   +-- environment
    |       +-- test
    |           |-- file3.ext
    |           +-- file4.ext
    +-- python
        +-- src
        |   +-- starter
        |       |-- class1.py
        |       +-- class2.py
        +-- suites
        |   |-- test_class1.py
        |   +-- test_class2.py
        +-- environment
            +-- test
                |-- file3.ext
                +-- file4.ext
</pre>
  <p>
  If files are specified at both the global and system-specific levels, the
  files available are the union of both, where files with the same path names
  in both locations are overridden by the system-specific contents.
  </p>
</section>


<section>
  <h2 id="format">Using Data-driven Test Suites for Simple Cases</h2>
  <p>
    For exercises that have relatively simple scaffolding requirements for
    testing--that is, most or all of the tests follow the same basic
    format, but vary in some standardized ways such as different inputs
    or outputs--you may find writing test data directly into your PEML
    description to be more convenient than providing separate test cases.
  </p>
  <p>For example, maybe you are working with a tool that only tests
  standard input/standard output behaviors, so every test you run
  consists only of a pair of input/output values. Then you might be able to
  describe your tests this way:
  </p>

<figure class="highlight"><pre><code class="language-peml" data-lang="peml"><span class="kn">[suites]</span><span class="w">
</span><span class="kn">[.cases]</span><span class="w">

</span><span class="k">stdin:</span><span class="w"> </span>racecar<span class="w">
</span><span class="k">stdout:</span><span class="w"> </span>"racecar"<span class="w"> </span>is<span class="w"> </span>a<span class="w"> </span>palindrome.<span class="w">

</span><span class="k">stdin:</span><span class="w"> </span>Flintstone<span class="w">
</span><span class="k">stdout:</span><span class="w"> </span>"Flintstone"<span class="w"> </span>is<span class="w"> </span>not<span class="w"> </span>a<span class="w"> </span>palindrome.<span class="w">

</span><span class="kn">[]</span><span class="w">
</span><span class="kn">[]</span><span class="w">
</span><span class="c1"># The [] ends/closes a list of items. The first []</span><span class="w">
</span><span class="c1"># closes the list of cases in one suite, while the second [] closes</span><span class="w">
</span><span class="c1"># the list of suites, which here includes only one suite.</span></code></pre></figure>

  <p>
  Here, the <code>[suites]</code> consist of a single test suite that contains two
  test cases. Each test case here contains two values, named "stdin"
  and "stdout". The tool translating this input into test cases would
  need to recognize those names and know how to use them, so check with
  your tool regarding support for this format and required naming conventions
  for variables. However, this is a fairly simple way to mark up the values
  when the situation permits.
  </p>
  <p>
  In fact, the same content could be written in CSV, YAML, JSON, etc.,
  depending on what your grading tool supports.
  </p>

<figure class="highlight"><pre><code class="language-peml" data-lang="peml"><span class="kn">[suites]</span><span class="w">

</span><span class="k">name:</span><span class="w"> </span>csv-version.csv<span class="w">
</span><span class="k">type:</span><span class="w"> </span>text/csv<span class="w">
</span><span class="k">content:</span><span class="sh">----------
stdin,stdout
"racecar","""racecar"" is a palindrome."
"Flintstone","""Flintstone"" is not a palindrome."
----------</span><span class="w">

</span><span class="k">name:</span><span class="w"> </span>yaml-version.yaml<span class="w">
</span><span class="k">type:</span><span class="w"> </span>text/x-yaml<span class="w">
</span><span class="k">content:</span><span class="sh">----------
---
- stdin: racecar
  stdout: "\"racecar\" is a palindrome."
- stdin: Flintstone
  stdout: "\"Flintstone\" is not a palindrome."
----------</span><span class="w">

</span><span class="kn">[]</span></code></pre></figure>

  <p>
  Here, the MIME types for the files were specified, but they can also
  be deduced from the file names, so the MIME type is redudant (not
  required). Also, because of the error-prone nature of manually quoting
  data in CSV format, PEML supports an alternative "text/x-unquoted-csv"
  where values are written in the same notation that would be used in
  the target programming system, allowing more natural use of expressions,
  native literal constructs, escapes, etc.
  </p>
  <p>
  If you are lucky enough to have a tool that supports it, you may be
  able to provide a template used to translate a single test case record
  into executable code. You might even be able to designate tests as
  privately visible to instructors only, or publicly visible to students.
  For example:
  </p>  

<figure class="highlight"><pre><code class="language-peml" data-lang="peml"><span class="kn">[suites]</span><span class="w">
</span><span class="k">name:</span><span class="w"> </span>csv-version.csv<span class="w">
</span><span class="k">visibility:</span><span class="w"> </span>public<span class="w">
</span><span class="k">template:</span><span class="w">
    </span>assertEquals("<span class="w"> </span>*<span class="w">  </span>==<span class="w"> </span>",<span class="w">
        </span>,<span class="w"> </span>Answer.multiply(,<span class="w"> </span>));<span class="w">
</span><span class="k">content:</span><span class="sh">----------
x,y,expected
2,4,8
1,1,1
-2,3,-6
----------</span><span class="w">
</span><span class="kn">[]</span></code></pre></figure>

</section>


<section>
  <h2 id="next">What Next?</h2>
  
  <p>If you haven't read through the whole <a href="index.html">PEML
  Introduction</a>, that is your next step.</p>
  
  <p>If you want to know more about how PEML came to be, why we're not using
  straight YAML or JSON, PEML's design
  goals, and its influences, read our
  <a href="about.html">About PEML</a> page.
  </p>
  
  <p>
  Finally, start <a href="schemas/exercise.html">digging into the
  PEML definition</a>.
  </p>
</section>
</div><div class="d-print-none"><footer class="article__footer"><!-- start custom article footer snippet -->

<!-- end custom article footer snippet -->
<div class="article__license"><div class="license">
    <p>This work is licensed under a <a itemprop="license" rel="license" href="https://creativecommons.org/licenses/by-sa/4.0/">Attribution-ShareAlike 4.0 International</a> license.
      <a rel="license" href="https://creativecommons.org/licenses/by-sa/4.0/">
        <img alt="Attribution-ShareAlike 4.0 International" src="https://i.creativecommons.org/l/by-sa/4.0/88x31.png" />
      </a>
    </p>
  </div></div></footer>
</div>

</div>

<script>(function() {
  var SOURCES = window.TEXT_VARIABLES.sources;
  window.Lazyload.js(SOURCES.jquery, function() {
    $(function() {
      var $this ,$scroll;
      var $articleContent = $('.js-article-content');
      var hasSidebar = $('.js-page-root').hasClass('layout--page--sidebar');
      var scroll = hasSidebar ? '.js-page-main' : 'html, body';
      $scroll = $(scroll);

      $articleContent.find('.highlight').each(function() {
        $this = $(this);
        $this.attr('data-lang', $this.find('code').attr('data-lang'));
      });
      $articleContent.find('h1[id], h2[id], h3[id], h4[id], h5[id], h6[id]').each(function() {
        $this = $(this);
        $this.append($('<a class="anchor d-print-none" aria-hidden="true"></a>').html('<i class="fas fa-anchor"></i>'));
      });
      $articleContent.on('click', '.anchor', function() {
        $scroll.scrollToAnchor('#' + $(this).parent().attr('id'), 400);
      });
    });
  });
})();
</script>
</div><section class="page__comments d-print-none"></section></article><!-- start custom main bottom snippet -->

<!-- end custom main bottom snippet -->
</div>
            </div></div><div class="page__footer d-print-none">
<footer class="footer py-4 js-page-footer">
  <div class="main"><div itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Virginia Tech"><meta itemprop="url" content="http://cs.vt.edu/"><meta itemprop="description" content="PEML, Web-CAT, and related projects are academic research projects developed at Virginia Tech. The project lead is Stephen Edwards.
"><div class="footer__author-links"><div class="author-links">
  <ul class="menu menu--nowrap menu--inline"><link itemprop="url" href="http://cs.vt.edu/"><li title="Send us an Email.">
      <a class="button button--circle mail-button" itemprop="email" href="mailto:webcat@vt.edu" target="_blank">
        <i class="fas fa-envelope"></i>
      </a><li title="Follow us on Github.">
        <a class="button button--circle github-button" itemprop="sameAs" href="https://github.com/CSSPLICE" target="_blank">
          <div class="icon"><svg fill="#000000" width="24px" height="24px" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg">
  <path class="svgpath" data-index="path_0" fill="#272636" d="M0 525.2c0 223.6 143.3 413.7 343 483.5 26.9 6.8 22.8-12.4 22.8-25.4l0-88.7c-155.3 18.2-161.5-84.6-172-101.7-21.1-36-70.8-45.2-56-62.3 35.4-18.2 71.4 4.6 113.1 66.3 30.2 44.7 89.1 37.2 119 29.7 6.5-26.9 20.5-50.9 39.7-69.6C248.8 728.2 181.7 630 181.7 513.2c0-56.6 18.7-108.7 55.3-150.7-23.3-69.3 2.2-128.5 5.6-137.3 66.5-6 135.5 47.6 140.9 51.8 37.8-10.2 80.9-15.6 129.1-15.6 48.5 0 91.8 5.6 129.8 15.9 12.9-9.8 77-55.8 138.8-50.2 3.3 8.8 28.2 66.7 6.3 135 37.1 42.1 56 94.6 56 151.4 0 117-67.5 215.3-228.8 243.7 26.9 26.6 43.6 63.4 43.6 104.2l0 128.8c0.9 10.3 0 20.5 17.2 20.5C878.1 942.4 1024 750.9 1024 525.3c0-282.9-229.3-512-512-512C229.1 13.2 0 242.3 0 525.2L0 525.2z" />
</svg>
</div>
        </a>
      </li></ul>
</div>
</div>
    </div><div class="site-info mt-2">
      <div>© PEML 2019,
        Powered by <a title="Jekyll is a simple, blog-aware, static site generator." href="http://jekyllrb.com/">Jekyll</a> & <a
        title="TeXt is a super customizable Jekyll theme." href="https://github.com/kitian616/jekyll-TeXt-theme">TeXt Theme</a>.
      </div>
    </div>
  </div>
</footer>
</div></div>
    </div><script>(function() {
  var SOURCES = window.TEXT_VARIABLES.sources;
  window.Lazyload.js(SOURCES.jquery, function() {
    var $body = $('body'), $window = $(window);
    var $pageRoot = $('.js-page-root'), $pageMain = $('.js-page-main');
    var activeCount = 0;
    function modal(options) {
      var $root = this, visible, onChange, hideWhenWindowScroll = false;
      var scrollTop;
      function setOptions(options) {
        var _options = options || {};
        visible = _options.initialVisible === undefined ? false : show;
        onChange = _options.onChange;
        hideWhenWindowScroll = _options.hideWhenWindowScroll;
      }
      function init() {
        setState(visible);
      }
      function setState(isShow) {
        if (isShow === visible) {
          return;
        }
        visible = isShow;
        if (visible) {
          activeCount++;
          scrollTop = $(window).scrollTop() || $pageMain.scrollTop();
          $root.addClass('modal--show');
          $pageMain.scrollTop(scrollTop);
          activeCount === 1 && ($pageRoot.addClass('show-modal'), $body.addClass('of-hidden'));
          hideWhenWindowScroll && window.hasEvent('touchstart') && $window.on('scroll', hide);
          $window.on('keyup', handleKeyup);
        } else {
          activeCount > 0 && activeCount--;
          $root.removeClass('modal--show');
          $window.scrollTop(scrollTop);
          activeCount === 0 && ($pageRoot.removeClass('show-modal'), $body.removeClass('of-hidden'));
          hideWhenWindowScroll && window.hasEvent('touchstart') && $window.off('scroll', hide);
          $window.off('keyup', handleKeyup);
        }
        onChange && onChange(visible);
      }
      function show() {
        setState(true);
      }
      function hide() {
        setState(false);
      }
      function handleKeyup(e) {
        // Char Code: 27  ESC
        if (e.which ===  27) {
          hide();
        }
      }
      setOptions(options);
      init();
      return {
        show: show,
        hide: hide,
        $el: $root
      };
    }
    $.fn.modal = modal;
  });
})();
</script><div class="modal modal--overflow page__search-modal d-print-none js-page-search-modal"><script>
(function () {
  var SOURCES = window.TEXT_VARIABLES.sources;
  window.Lazyload.js(SOURCES.jquery, function() {
    // search panel
    var search = (window.search || (window.search = {}));
    var useDefaultSearchBox = window.useDefaultSearchBox === undefined ?
      true : window.useDefaultSearchBox ;

    var $searchModal = $('.js-page-search-modal');
    var $searchToggle = $('.js-search-toggle');
    var searchModal = $searchModal.modal({ onChange: handleModalChange, hideWhenWindowScroll: true });
    var modalVisible = false;
    search.searchModal = searchModal;

    var $searchBox = null;
    var $searchInput = null;
    var $searchClear = null;

    function getModalVisible() {
      return modalVisible;
    }
    search.getModalVisible = getModalVisible;

    function handleModalChange(visible) {
      modalVisible = visible;
      if (visible) {
        search.onShow && search.onShow();
        useDefaultSearchBox && $searchInput[0] && $searchInput[0].focus();
      } else {
        search.onShow && search.onHide();
        useDefaultSearchBox && $searchInput[0] && $searchInput[0].blur();
        setTimeout(function() {
          useDefaultSearchBox && ($searchInput.val(''), $searchBox.removeClass('not-empty'));
          search.clear && search.clear();
          window.pageAsideAffix && window.pageAsideAffix.refresh();
        }, 400);
      }
    }

    $searchToggle.on('click', function() {
      modalVisible ? searchModal.hide() : searchModal.show();
    });
    // Char Code: 83  S, 191 /
    $(window).on('keyup', function(e) {
      if (!modalVisible && !window.isFormElement(e.target || e.srcElement) && (e.which === 83 || e.which === 191)) {
        modalVisible || searchModal.show();
      }
    });

    if (useDefaultSearchBox) {
      $searchBox = $('.js-search-box');
      $searchInput = $searchBox.children('input');
      $searchClear = $searchBox.children('.js-icon-clear');
      search.getSearchInput = function() {
        return $searchInput.get(0);
      };
      search.getVal = function() {
        return $searchInput.val();
      };
      search.setVal = function(val) {
        $searchInput.val(val);
      };

      $searchInput.on('focus', function() {
        $(this).addClass('focus');
      });
      $searchInput.on('blur', function() {
        $(this).removeClass('focus');
      });
      $searchInput.on('input', window.throttle(function() {
        var val = $(this).val();
        if (val === '' || typeof val !== 'string') {
          search.clear && search.clear();
        } else {
          $searchBox.addClass('not-empty');
          search.onInputNotEmpty && search.onInputNotEmpty(val);
        }
      }, 400));
      $searchClear.on('click', function() {
        $searchInput.val(''); $searchBox.removeClass('not-empty');
        search.clear && search.clear();
      });
    }
  });
})();
</script><div class="search search--dark">
  <div class="main">
    <div class="search__header">Search</div>
    <div class="search-bar">
      <div class="search-box js-search-box">
        <div class="search-box__icon-search"><i class="fas fa-search"></i></div>
        <input type="text" />
        <div class="search-box__icon-clear js-icon-clear">
          <a><i class="fas fa-times"></i></a>
        </div>
      </div>
      <button class="button button--theme-dark button--pill search__cancel js-search-toggle">
        Cancel</button>
    </div>
    <div class="search-result js-search-result"></div>
  </div>
</div>
<script>var SOURCES = window.TEXT_VARIABLES.sources;
var PAHTS = window.TEXT_VARIABLES.paths;
window.Lazyload.js([SOURCES.jquery, PAHTS.search_js], function() {
  var search = (window.search || (window.search = {}));
  var searchData = window.TEXT_SEARCH_DATA || {};

  function memorize(f) {
    var cache = {};
    return function () {
      var key = Array.prototype.join.call(arguments, ',');
      if (key in cache) return cache[key];
      else return cache[key] = f.apply(this, arguments);
    };
  }

  /// search
  function searchByQuery(query) {
    var i, j, key, keys, cur, _title, result = {};
    keys = Object.keys(searchData);
    for (i = 0; i < keys.length; i++) {
      key = keys[i];
      for (j = 0; j < searchData[key].length; j++) {
        cur = searchData[key][j], _title = cur.title;
        if ((result[key] === undefined || result[key] && result[key].length < 4 )
          && _title.toLowerCase().indexOf(query.toLowerCase()) >= 0) {
          if (result[key] === undefined) {
            result[key] = [];
          }
          result[key].push(cur);
        }
      }
    }
    return result;
  }

  var renderHeader = memorize(function(header) {
    return $('<p class="search-result__header">' + header + '</p>');
  });

  var renderItem = function(index, title, url) {
    return $('<li class="search-result__item" data-index="' + index + '"><a class="button" href="' + url + '">' + title + '</a></li>');
  };

  function render(data) {
    if (!data) { return null; }
    var $root = $('<ul></ul>'), i, j, key, keys, cur, itemIndex = 0;
    keys = Object.keys(data);
    for (i = 0; i < keys.length; i++) {
      key = keys[i];
      $root.append(renderHeader(key));
      for (j = 0; j < data[key].length; j++) {
        cur = data[key][j];
        $root.append(renderItem(itemIndex++, cur.title, cur.url));
      }
    }
    return $root;
  }

  // search box
  var $result = $('.js-search-result'), $resultItems;
  var lastActiveIndex, activeIndex;

  function clear() {
    $result.html(null);
    $resultItems = $('.search-result__item'); activeIndex = 0;
  }
  function onInputNotEmpty(val) {
    $result.html(render(searchByQuery(val)));
    $resultItems = $('.search-result__item'); activeIndex = 0;
    $resultItems.eq(0).addClass('active');
  }

  search.clear = clear;
  search.onInputNotEmpty = onInputNotEmpty;

  function updateResultItems() {
    lastActiveIndex >= 0 && $resultItems.eq(lastActiveIndex).removeClass('active');
    activeIndex >= 0 && $resultItems.eq(activeIndex).addClass('active');
  }

  function moveActiveIndex(direction) {
    var itemsCount = $resultItems ? $resultItems.length : 0;
    if (itemsCount > 1) {
      lastActiveIndex = activeIndex;
      if (direction === 'up') {
        activeIndex = (activeIndex - 1 + itemsCount) % itemsCount;
      } else if (direction === 'down') {
        activeIndex = (activeIndex + 1 + itemsCount) % itemsCount;
      }
      updateResultItems();
    }
  }

  // Char Code: 13  Enter, 37  ⬅, 38  ⬆, 39  ➡, 40  ⬇
  $(window).on('keyup', function(e) {
    var modalVisible = search.getModalVisible && search.getModalVisible();
    if (modalVisible) {
      if (e.which === 38) {
        modalVisible && moveActiveIndex('up');
      } else if (e.which === 40) {
        modalVisible && moveActiveIndex('down');
      } else if (e.which === 13) {
        modalVisible && $resultItems && activeIndex >= 0 && $resultItems.eq(activeIndex).children('a')[0].click();
      }
    }
  });

  $result.on('mouseover', '.search-result__item > a', function() {
    var itemIndex = $(this).parent().data('index');
    itemIndex >= 0 && (lastActiveIndex = activeIndex, activeIndex = itemIndex, updateResultItems());
  });
});
</script>
</div></div>


<script>(function() {
  var SOURCES = window.TEXT_VARIABLES.sources;
  window.Lazyload.js(SOURCES.jquery, function() {
    function scrollToAnchor(anchor, duration, callback) {
      var $root = this;
      $root.animate({ scrollTop: $(anchor).position().top }, duration, function() {
        window.history.replaceState(null, '', window.location.href.split('#')[0] + anchor);
        callback && callback();
      });
    }
    $.fn.scrollToAnchor = scrollToAnchor;
  });
})();
(function() {
  var SOURCES = window.TEXT_VARIABLES.sources;
  window.Lazyload.js(SOURCES.jquery, function() {
    function affix(options) {
      var $root = this, $window = $(window), $scrollTarget, $scroll,
        offsetBottom = 0, scrollTarget = window, scroll = window.document, disabled = false, isOverallScroller = true,
        rootTop, rootLeft, rootHeight, scrollBottom, rootBottomTop,
        hasInit = false, curState;

      function setOptions(options) {
        var _options = options || {};
        _options.offsetBottom && (offsetBottom = _options.offsetBottom);
        _options.scrollTarget && (scrollTarget = _options.scrollTarget);
        _options.scroll && (scroll = _options.scroll);
        _options.disabled !== undefined && (disabled = _options.disabled);
        $scrollTarget = $(scrollTarget);
        isOverallScroller = window.isOverallScroller($scrollTarget[0]);
        $scroll = $(scroll);
      }
      function preCalc() {
        top();
        rootHeight = $root.outerHeight();
        rootTop = $root.offset().top + (isOverallScroller ? 0 :  $scrollTarget.scrollTop());
        rootLeft = $root.offset().left;
      }
      function calc(needPreCalc) {
        needPreCalc && preCalc();
        scrollBottom = $scroll.outerHeight() - offsetBottom - rootHeight;
        rootBottomTop = scrollBottom - rootTop;
      }
      function top() {
        if (curState !== 'top') {
          $root.removeClass('fixed').css({
            left: 0,
            top: 0
          });
          curState = 'top';
        }
      }
      function fixed() {
        if (curState !== 'fixed') {
          $root.addClass('fixed').css({
            left: rootLeft + 'px',
            top: 0
          });
          curState = 'fixed';
        }
      }
      function bottom() {
        if (curState !== 'bottom') {
          $root.removeClass('fixed').css({
            left: 0,
            top: rootBottomTop + 'px'
          });
          curState = 'bottom';
        }
      }
      function setState() {
        var scrollTop = $scrollTarget.scrollTop();
        if (scrollTop >= rootTop && scrollTop <= scrollBottom) {
          fixed();
        } else if (scrollTop < rootTop) {
          top();
        } else {
          bottom();
        }
      }
      function init() {
        if(!hasInit) {
          var interval, timeout;
          calc(true); setState();
          // run calc every 100 millisecond
          interval = setInterval(function() {
            calc();
          }, 100);
          timeout = setTimeout(function() {
            clearInterval(interval);
          }, 45000);
          window.pageLoad.then(function() {
            setTimeout(function() {
              clearInterval(interval);
              clearTimeout(timeout);
            }, 3000);
          });
          $scrollTarget.on('scroll', function() {
            disabled || setState();
          });
          $window.on('resize', function() {
            disabled || (calc(true), setState());
          });
          hasInit = true;
        }
      }

      setOptions(options);
      if (!disabled) {
        init();
      }
      $window.on('resize', window.throttle(function() {
        init();
      }, 200));
      return {
        setOptions: setOptions,
        refresh: function() {
          calc(true, { animation: false }); setState();
        }
      };
    }
    $.fn.affix = affix;
  });
})();
(function() {
  var SOURCES = window.TEXT_VARIABLES.sources;
  window.Lazyload.js(SOURCES.jquery, function() {
    function toc(options) {
      var $root = this, $window = $(window), $scrollTarget, $scroller, $tocUl = $('<ul class="toc toc--ellipsis"></ul>'), $tocLi, $headings, $activeLast, $activeCur,
        selectors = 'h1,h2,h3', container = 'body', scrollTarget = window, scroller = 'html, body', disabled = false,
        headingsPos, scrolling = false, hasRendered = false, hasInit = false;

      function setOptions(options) {
        var _options = options || {};
        _options.selectors && (selectors = _options.selectors);
        _options.container && (container = _options.container);
        _options.scrollTarget && (scrollTarget = _options.scrollTarget);
        _options.scroller && (scroller = _options.scroller);
        _options.disabled !== undefined && (disabled = _options.disabled);
        $headings = $(container).find(selectors).filter('[id]');
        $scrollTarget = $(scrollTarget);
        $scroller = $(scroller);
      }
      function calc() {
        headingsPos = [];
        $headings.each(function() {
          headingsPos.push(Math.floor($(this).position().top));
        });
      }
      function setState(element, disabled) {
        var scrollTop = $scrollTarget.scrollTop(), i;
        if (disabled || !headingsPos || headingsPos.length < 1) { return; }
        if (element) {
          $activeCur = element;
        } else {
          for (i = 0; i < headingsPos.length; i++) {
            if (scrollTop >= headingsPos[i]) {
              $activeCur = $tocLi.eq(i);
            } else {
              $activeCur || ($activeCur = $tocLi.eq(i));
              break;
            }
          }
        }
        $activeLast && $activeLast.removeClass('active');
        ($activeLast = $activeCur).addClass('active');
      }
      function render() {
        if(!hasRendered) {
          $root.append($tocUl);
          $headings.each(function() {
            var $this = $(this);
            $tocUl.append($('<li></li>').addClass('toc-' + $this.prop('tagName').toLowerCase())
              .append($('<a></a>').text($this.text()).attr('href', '#' + $this.prop('id'))));
          });
          $tocLi = $tocUl.children('li');
          $tocUl.on('click', 'a', function(e) {
            e.preventDefault();
            var $this = $(this);
            scrolling = true;
            setState($this.parent());
            $scroller.scrollToAnchor($this.attr('href'), 400, function() {
              scrolling = false;
            });
          });
        }
        hasRendered = true;
      }
      function init() {
        var interval, timeout;
        if(!hasInit) {
          render(); calc(); setState(null, scrolling);
          // run calc every 100 millisecond
          interval = setInterval(function() {
            calc();
          }, 100);
          timeout = setTimeout(function() {
            clearInterval(interval);
          }, 45000);
          window.pageLoad.then(function() {
            setTimeout(function() {
              clearInterval(interval);
              clearTimeout(timeout);
            }, 3000);
          });
          $scrollTarget.on('scroll', function() {
            disabled || setState(null, scrolling);
          });
          $window.on('resize', window.throttle(function() {
            if (!disabled) {
              render(); calc(); setState(null, scrolling);
            }
          }, 100));
        }
        hasInit = true;
      }

      setOptions(options);
      if (!disabled) {
        init();
      }
      $window.on('resize', window.throttle(function() {
        init();
      }, 200));
      return {
        setOptions: setOptions
      };
    }
    $.fn.toc = toc;
  });
})();
/*(function () {

})();*/
</script><script>
  /* toc must before affix, since affix need to konw toc' height. */(function() {
  var SOURCES = window.TEXT_VARIABLES.sources;
  var TOC_SELECTOR = window.TEXT_VARIABLES.site.toc.selectors;
  window.Lazyload.js(SOURCES.jquery, function() {
    var $window = $(window);
    var $articleContent = $('.js-article-content');
    var $tocRoot = $('.js-toc-root'), $col2 = $('.js-col-aside');
    var toc;
    var tocDisabled = false;
    var hasSidebar = $('.js-page-root').hasClass('layout--page--sidebar');
    var hasToc = $articleContent.find(TOC_SELECTOR).length > 0;

    function disabled() {
      return $col2.css('display') === 'none' || !hasToc;
    }

    tocDisabled = disabled();

    toc = $tocRoot.toc({
      selectors: TOC_SELECTOR,
      container: $articleContent,
      scrollTarget: hasSidebar ? '.js-page-main' : null,
      scroller: hasSidebar ? '.js-page-main' : null,
      disabled: tocDisabled
    });

    $window.on('resize', window.throttle(function() {
      tocDisabled = disabled();
      toc && toc.setOptions({
        disabled: tocDisabled
      });
    }, 100));

  });
})();
(function() {
  var SOURCES = window.TEXT_VARIABLES.sources;
  window.Lazyload.js(SOURCES.jquery, function() {
    var $window = $(window), $pageFooter = $('.js-page-footer');
    var $pageAside = $('.js-page-aside');
    var affix;
    var tocDisabled = false;
    var hasSidebar = $('.js-page-root').hasClass('layout--page--sidebar');

    affix = $pageAside.affix({
      offsetBottom: $pageFooter.outerHeight(),
      scrollTarget: hasSidebar ? '.js-page-main' : null,
      scroller: hasSidebar ? '.js-page-main' : null,
      scroll: hasSidebar ? $('.js-page-main').children() : null,
      disabled: tocDisabled
    });

    $window.on('resize', window.throttle(function() {
      affix && affix.setOptions({
        disabled: tocDisabled
      });
    }, 100));

    window.pageAsideAffix = affix;
  });
})();
</script>
    </div>
    <script>(function () {
  var $root = document.getElementsByClassName('root')[0];
  if (window.hasEvent('touchstart')) {
    $root.dataset.isTouch = true;
    document.addEventListener('touchstart', function(){}, false);
  }
})();
</script>
  </body>
</html>

